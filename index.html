<!DOCTYPE html>
<html lang="fr" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Peak & Beans | Cultivez votre énergie</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,700;1,700&display=swap" rel="stylesheet">
    <style>
        :root {
            --forest: #2D5A27;
            --earth: #8B5A2B;
            --stone: #F7F5F2;
            --ink: #1A1C1A;
            --leaf-light: #A7C957;
        }
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--stone);
            color: var(--ink);
            overflow-x: hidden;
        }
        .font-serif { font-family: 'Playfair Display', serif; }
        
        .glass-panel {
            background: rgba(255, 255, 255, 0.75);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(45, 90, 39, 0.08);
        }

        .gradient-text {
            background: linear-gradient(135deg, var(--forest), var(--earth));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .topo-bg {
            position: fixed;
            inset: 0;
            z-index: -1;
            opacity: 0.04;
            background-image: url("data:image/svg+xml,%3Csvg width='800' height='800' viewBox='0 0 800 800' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 200c100-50 200 50 400 0s300-100 400 0M0 400c150 50 250-100 400 0s250 100 400 0M0 600c100 100 300-50 400 0s300 50 400 0' fill='none' stroke='%232D5A27' stroke-width='1'/%3E%3C/svg%3E");
            background-size: 1200px;
            animation: topo-drift 60s linear infinite;
        }
        @keyframes topo-drift {
            from { background-position: 0 0; }
            to { background-position: 1200px 1200px; }
        }

        .media-container {
            background: #e5e1da;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .card-hover:hover { 
            transform: translateY(-10px); 
            box-shadow: 0 30px 60px rgba(45, 90, 39, 0.1); 
        }

        .loading-shimmer {
            background: linear-gradient(90deg, #e5e1da 25%, #f0ede8 50%, #e5e1da 75%);
            background-size: 200% 100%;
            animation: shimmer 1.5s infinite;
        }
        @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

        .video-overlay {
            background: linear-gradient(to top, rgba(0,0,0,0.2), transparent);
            pointer-events: none;
        }

        @keyframes pulse-slow {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 0.8; }
        }
        .animate-pulse-slow { animation: pulse-slow 3s infinite; }
    </style>
    <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@^1.41.0"
      }
    }
    </script>
</head>
<body>
    <div class="topo-bg"></div>

    <!-- Navigation -->
    <nav class="fixed top-0 left-0 right-0 z-50 px-8 py-4 flex justify-between items-center bg-[#F7F5F2]/90 backdrop-blur-xl border-b border-black/5">
        <div class="flex items-center space-x-4">
            <svg width="40" height="40" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg" class="w-10 h-10">
                <path d="M100 20L160 140H40L100 20Z" fill="#2D5A27" fill-opacity="0.1"/>
                <path d="M100 20L145 140M100 20L55 140" stroke="#2D5A27" stroke-width="2"/>
                <path d="M130 80C150 80 170 110 170 140" stroke="#2D5A27" stroke-width="4" stroke-linecap="round"/>
                <circle cx="85" cy="130" r="8" fill="#8B5A2B"/>
                <circle cx="105" cy="145" r="10" fill="#8B5A2B"/>
                <circle cx="125" cy="135" r="7" fill="#8B5A2B"/>
            </svg>
            <div class="flex flex-col">
                <span class="font-serif font-bold text-lg tracking-tight uppercase leading-none">Peak <span class="text-[#8B5A2B]">&</span> Beans</span>
                <span class="text-[7px] font-bold tracking-[0.4em] uppercase text-[#2D5A27] mt-1 italic">Cultivez votre énergie</span>
            </div>
        </div>
        <div class="hidden lg:flex space-x-12 text-[10px] font-bold uppercase tracking-[0.3em] text-neutral-500">
            <a href="#tarifs" class="hover:text-[#2D5A27] transition-all">Services</a>
            <a href="#lab" class="hover:text-[#2D5A27] transition-all">Expérience</a>
            <a href="#abonnements" class="hover:text-[#2D5A27] transition-all">Le Cercle</a>
        </div>
        <button onclick="openModal('Contact')" class="bg-[#2D5A27] text-white px-8 py-3 rounded-full text-[10px] font-bold uppercase tracking-widest shadow-xl shadow-[#2D5A27]/20 hover:scale-105 transition-all">
            Nous rejoindre
        </button>
    </nav>

    <!-- Hero Section -->
    <header class="relative pt-64 pb-32 px-8 lg:px-24 max-w-7xl mx-auto text-center">
        <div class="inline-flex items-center space-x-3 bg-[#2D5A27]/5 px-6 py-2 rounded-full mb-12 border border-[#2D5A27]/10 animate-fade-in">
            <span class="text-[9px] font-bold tracking-[0.5em] uppercase text-[#2D5A27]">Bordeaux • Darwin Eco-système</span>
        </div>
        
        <h1 class="text-7xl md:text-[10rem] font-serif mb-8 leading-[0.85] text-[#1A1C1A] italic">
            Cultivez votre <br />
            <span class="gradient-text not-italic font-bold">énergie.</span>
        </h1>
        
        <p class="text-lg md:text-xl text-neutral-500 max-w-2xl mx-auto mb-20 font-light leading-relaxed">
            L'alliance ultime du bio-hacking et de la caféine. Un sanctuaire dédié à la longévité au cœur de Bordeaux.
        </p>

        <!-- Main Hero Image (Photo) -->
        <div id="hero-image" class="relative w-full aspect-[21/10] rounded-[4rem] overflow-hidden border border-black/5 media-container group shadow-2xl">
            <div class="loading-shimmer absolute inset-0"></div>
            <div class="z-10 text-[10px] uppercase tracking-widest text-neutral-400">Capture de l'instant présent...</div>
        </div>
    </header>

    <!-- Pricing Section -->
    <section id="tarifs" class="py-32 px-8 lg:px-24">
        <div class="max-w-7xl mx-auto">
            <div class="flex flex-col md:flex-row justify-between items-end mb-24 gap-8">
                <div>
                    <span class="text-[10px] font-bold tracking-[0.5em] text-[#8B5A2B] uppercase mb-4 block">La Carte de l'Énergie</span>
                    <h2 class="text-6xl font-serif italic leading-tight text-[#1A1C1A]">Optimisation & <br/>Récupération.</h2>
                </div>
                <!-- Best Seller Highlight -->
                <div class="bg-[#A7C957]/10 border border-[#A7C957]/30 p-6 rounded-3xl max-w-sm">
                    <span class="text-[8px] font-black uppercase tracking-[0.3em] bg-[#A7C957] text-[#2D5A27] px-3 py-1 rounded-full mb-3 inline-block">Best-Seller</span>
                    <h4 class="font-serif italic text-xl mb-1">Combo Performance</h4>
                    <p class="text-[10px] text-neutral-500 mb-4 uppercase tracking-widest leading-relaxed">Bottes + Massage Crânien + Café Focus</p>
                    <div class="flex justify-between items-center">
                        <span class="text-2xl font-bold text-[#2D5A27]">65 €</span>
                        <button onclick="openModal('Combo Performance')" class="text-[9px] font-bold uppercase tracking-widest bg-[#2D5A27] text-white px-5 py-2 rounded-full hover:scale-105 transition-all">Optimiser ma pause</button>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- BIO-BAR -->
                <div class="glass-panel p-12 rounded-[3rem] card-hover transition-all group border-l-4 border-l-[#8B5A2B]/20">
                    <div class="text-[#8B5A2B] mb-10">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M17 8h1a4 4 0 1 1 0 8h-1M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z"/></svg>
                    </div>
                    <h4 class="text-2xl font-serif italic mb-8">Bio-Bar <span class="block text-xs not-italic font-sans uppercase tracking-widest text-neutral-400 mt-2">Nootropiques</span></h4>
                    <div class="space-y-6 mb-12">
                        <div class="flex justify-between items-end border-b border-black/5 pb-4">
                            <div><p class="font-semibold text-sm">Cafés & Lattes "Focus"</p><p class="text-[10px] text-neutral-500 uppercase tracking-tighter italic">Spécialité + Lion's Mane</p></div>
                            <p class="text-[#8B5A2B] font-bold text-sm">5,50 €+</p>
                        </div>
                        <div class="flex justify-between items-end border-b border-black/5 pb-4">
                            <div><p class="font-semibold text-sm">Élixirs Récupération</p><p class="text-[10px] text-neutral-500 uppercase tracking-tighter italic">Collagène, Curcuma</p></div>
                            <p class="text-[#8B5A2B] font-bold text-sm">6,50 €</p>
                        </div>
                        <div class="flex justify-between items-end">
                            <div><p class="font-semibold text-sm">Bio-Snacking</p><p class="text-[10px] text-neutral-500 uppercase tracking-tighter italic">Energy Balls Keto</p></div>
                            <p class="text-[#8B5A2B] font-bold text-sm">4,00 €+</p>
                        </div>
                    </div>
                    <button onclick="openModal('Menu Bar')" class="w-full py-4 rounded-2xl bg-black text-white text-[9px] font-bold uppercase tracking-[0.2em] hover:bg-[#8B5A2B] transition-all">Consulter la carte</button>
                </div>

                <!-- RECOVERY LAB -->
                <div class="p-12 rounded-[3rem] bg-[#1A1C1A] text-white shadow-2xl card-hover transition-all border-l-4 border-l-[#2D5A27]">
                    <div class="text-[#A7C957] mb-10">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><path d="M12 2v20M2 12h20M5 5l14 14"/></svg>
                    </div>
                    <h4 class="text-2xl font-serif italic mb-8">Recovery Lab <span class="block text-xs not-italic font-sans uppercase tracking-widest text-white/30 mt-2">Bio-Tech</span></h4>
                    <div class="space-y-6 mb-12">
                        <div class="flex justify-between items-end border-b border-white/10 pb-4">
                            <div><p class="font-semibold text-sm text-white">Cryo Localisée</p><p class="text-[10px] text-white/40 uppercase tracking-tighter italic">Ciblage inflammatoire</p></div>
                            <p class="text-[#A7C957] font-bold text-sm">35 €</p>
                        </div>
                        <div class="flex justify-between items-end border-b border-white/10 pb-4">
                            <div><p class="font-semibold text-sm text-white">Lumière Rouge (PBM)</p><p class="text-[10px] text-white/40 uppercase tracking-tighter italic">Régénération cellulaire</p></div>
                            <p class="text-[#A7C957] font-bold text-sm">30 €</p>
                        </div>
                        <div class="flex justify-between items-end">
                            <div><p class="font-semibold text-sm text-white">Compression (Bottes)</p><p class="text-[10px] text-white/40 uppercase tracking-tighter italic">Drainage lymphatique</p></div>
                            <p class="text-[#A7C957] font-bold text-sm">25 €</p>
                        </div>
                    </div>
                    <button onclick="openModal('Recovery Lab')" class="w-full py-4 rounded-2xl bg-[#2D5A27] text-white text-[9px] font-bold uppercase tracking-[0.2em] hover:bg-[#A7C957] hover:text-[#1A1C1A] transition-all">Réserver une séance</button>
                </div>

                <!-- MASSAGE -->
                <div class="glass-panel p-12 rounded-[3rem] card-hover transition-all border-l-4 border-l-[#2D5A27]/20">
                    <div class="text-[#1A1C1A] mb-10">
                        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5"><circle cx="12" cy="12" r="10"/><path d="M12 8v8M8 12h8"/></svg>
                    </div>
                    <h4 class="text-2xl font-serif italic mb-8">Massage Studio <span class="block text-xs not-italic font-sans uppercase tracking-widest text-neutral-400 mt-2">Expertise</span></h4>
                    <div class="space-y-6 mb-12">
                        <div class="flex justify-between items-end border-b border-black/5 pb-4">
                            <div><p class="font-semibold text-sm">Deep Focus (30min)</p><p class="text-[10px] text-neutral-500 uppercase tracking-tighter italic">Crânien & Anti-écrans</p></div>
                            <p class="text-[#1A1C1A] font-bold text-sm">45 €</p>
                        </div>
                        <div class="flex justify-between items-end border-b border-black/5 pb-4">
                            <div><p class="font-semibold text-sm">Bio-Recovery (50min)</p><p class="text-[10px] text-neutral-500 uppercase tracking-tighter italic">Deep Tissue & Toxines</p></div>
                            <p class="text-[#1A1C1A] font-bold text-sm">85 €</p>
                        </div>
                        <div class="flex justify-between items-end">
                            <div><p class="font-semibold text-sm">Option "Bio-Huile"</p><p class="text-[10px] text-neutral-500 uppercase tracking-tighter italic">Enrichie au CBD</p></div>
                            <p class="text-[#2D5A27] font-bold text-sm">+5 €</p>
                        </div>
                    </div>
                    <button onclick="openModal('Massage Studio')" class="w-full py-4 rounded-2xl border border-black/10 text-[9px] font-bold uppercase tracking-[0.2em] hover:bg-black hover:text-white transition-all">Prendre RDV</button>
                </div>
            </div>
        </div>
    </section>

    <!-- Lab & Bar Discovery (VEO VIDEO GENERATION) -->
    <section id="lab" class="py-40 px-8 lg:px-24 max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-32">
        <div class="space-y-12">
            <h2 class="text-5xl font-serif mb-8 italic">La Science du Peak.</h2>
            <p class="text-neutral-500 text-lg leading-relaxed font-light">
                Entrez dans une dimension où la technologie répare vos cellules. Une expérience visuelle et sensorielle unique à Bordeaux.
            </p>
            <div id="lab-video-container" class="media-container rounded-[3.5rem] aspect-[4/3] border border-black/5 shadow-xl group cursor-pointer overflow-hidden">
                <div class="loading-shimmer absolute inset-0"></div>
                <div class="absolute inset-0 flex flex-col items-center justify-center p-12 text-center z-10 bg-black/10">
                    <p class="text-[9px] font-bold uppercase tracking-[0.4em] text-white mb-4 animate-pulse-slow">Cinématique Veo en cours de rendu...</p>
                    <p id="lab-loading-msg" class="text-[8px] uppercase tracking-widest text-white/50 italic">Initialisation du moteur de particules...</p>
                </div>
            </div>
        </div>
        
        <div class="space-y-12 md:mt-48">
            <h2 class="text-5xl font-serif mb-8 italic">L'Art du Beans.</h2>
            <p class="text-neutral-500 text-lg leading-relaxed font-light">
                Plus qu'un café, un rituel de performance. Observez la fusion des nootropiques dans votre tasse quotidienne.
            </p>
            <div id="bar-video-container" class="media-container rounded-[3.5rem] aspect-[4/3] border border-black/5 shadow-xl group cursor-pointer overflow-hidden">
                <div class="loading-shimmer absolute inset-0"></div>
                <img scr="https://github.com/mariechampion6-jpg/Peak-Beans2/blob/20998afa3da38f90532cdde92c1e71c4bbc04a2a/t%C3%A9l%C3%A9chargement%20(3).jpg" alt="Test">
            </div>
        </div>
    </section>

    <!-- Subscriptions -->
    <section id="abonnements" class="py-40 px-8 lg:px-24 bg-[#1A1C1A]/5">
        <div class="max-w-7xl mx-auto text-center">
            <span class="text-[10px] font-bold tracking-[0.5em] text-[#8B5A2B] uppercase mb-8 block">Le Cercle Peak & Beans</span>
            <h3 class="text-6xl font-serif italic mb-24">Adhésions Mensuelles.</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <!-- FOCUS -->
                <div class="p-12 rounded-[3.5rem] bg-white border border-black/5 flex flex-col items-center card-hover transition-all">
                    <h5 class="text-[9px] font-bold uppercase tracking-widest mb-6 text-neutral-400">Pass Focus</h5>
                    <div class="text-5xl font-serif italic mb-10">79€ <span class="text-[10px] not-italic text-neutral-400">/mois</span></div>
                    <ul class="text-neutral-600 text-[11px] space-y-5 mb-12 flex-grow text-left w-full pl-6 border-l border-[#8B5A2B]/20">
                        <li>• 1 Café Nootropique / jour</li>
                        <li>• 2 séances Tech au choix / mois</li>
                        <li>• Accès aux évènements Darwin</li>
                    </ul>
                    <button onclick="openModal('Pass Focus')" class="w-full py-5 rounded-2xl border border-black/10 text-[9px] font-bold uppercase tracking-widest hover:bg-black hover:text-white transition-all">Souscrire</button>
                </div>

                <!-- BIO-HACKER -->
                <div class="p-12 rounded-[4rem] bg-[#2D5A27] text-white flex flex-col items-center relative scale-105 shadow-2xl shadow-[#2D5A27]/30 z-10">
                    <div class="absolute -top-4 bg-[#8B5A2B] text-white text-[7px] font-black px-6 py-2 rounded-full tracking-[0.3em] uppercase">Rentabilité Maximale</div>
                    <h5 class="text-[9px] font-bold uppercase tracking-widest mb-6 text-white/40">Pass Bio-Hacker</h5>
                    <div class="text-5xl font-serif italic mb-10">149€ <span class="text-[10px] not-italic text-white/30">/mois</span></div>
                    <ul class="text-white/80 text-[11px] space-y-5 mb-12 flex-grow text-left w-full pl-6 border-l border-white/20">
                        <li class="text-white font-bold">• Recovery Lab en ILLIMITÉ</li>
                        <li>• -10% sur toute la carte Bar</li>
                        <li>• -10% sur les Massages</li>
                        <li>• Conciergerie Santé Peak</li>
                    </ul>
                    <button onclick="openModal('Pass Bio-Hacker')" class="w-full py-5 rounded-2xl bg-white text-[#2D5A27] text-[9px] font-bold uppercase tracking-widest hover:bg-[#F7F5F2] transition-all">Souscrire</button>
                </div>

                <!-- TOTAL PEAK -->
                <div class="p-12 rounded-[3.5rem] bg-white border border-black/5 flex flex-col items-center card-hover transition-all">
                    <h5 class="text-[9px] font-bold uppercase tracking-widest mb-6 text-neutral-400">Total Peak</h5>
                    <div class="text-5xl font-serif italic mb-10">229€ <span class="text-[10px] not-italic text-neutral-400">/mois</span></div>
                    <ul class="text-neutral-600 text-[11px] space-y-5 mb-12 flex-grow text-left w-full pl-6 border-l border-[#2D5A27]/20">
                        <li>• Illimité Tech (Cryo/LED/Bottes)</li>
                        <li>• 1 Massage Crânien / mois</li>
                        <li>• 1 Boisson Signature / jour</li>
                        <li>• Invitations VIP Labs</li>
                    </ul>
                    <button onclick="openModal('Pass Total Peak')" class="w-full py-5 rounded-2xl border border-black/10 text-[9px] font-bold uppercase tracking-widest hover:bg-black hover:text-white transition-all">Souscrire</button>
                </div>
            </div>
            
            <p class="mt-16 text-[9px] uppercase tracking-[0.4em] text-neutral-400">Pour les entreprises (5+ salariés) : <a href="#" onclick="openModal('Pack Team Darwin')" class="text-[#2D5A27] font-bold underline">Demander le devis Team Darwin</a></p>
        </div>
    </section>

    <!-- Footer -->
    <footer class="py-32 border-t border-black/5 text-center px-8 bg-white">
        <div class="flex flex-col items-center mb-16">
            <svg width="60" height="60" viewBox="0 0 200 200" fill="none" xmlns="http://www.w3.org/2000/svg" class="mb-6 opacity-40">
                <path d="M100 20L160 140H40L100 20Z" fill="#2D5A27"/>
                <circle cx="85" cy="130" r="8" fill="#8B5A2B"/>
                <circle cx="105" cy="145" r="10" fill="#8B5A2B"/>
                <circle cx="125" cy="135" r="7" fill="#8B5A2B"/>
            </svg>
            <h4 class="font-serif italic text-4xl mb-4">Peak <span class="text-[#8B5A2B]">&</span> Beans</h4>
            <p class="text-[10px] text-[#2D5A27] font-bold tracking-[0.6em] uppercase italic">Cultivez votre énergie</p>
        </div>

        <!-- Restoration of Footer Links -->
        <div class="flex flex-wrap justify-center gap-12 text-[9px] font-bold uppercase tracking-widest text-neutral-400 mb-20">
            <a href="#" onclick="openModal('Devenir Franchisé')" class="hover:text-black transition-colors">Franchise</a>
            <a href="#" onclick="openModal('Investissement')" class="hover:text-black transition-colors">Investir</a>
            <a href="#" onclick="openModal('Espace Presse')" class="hover:text-black transition-colors">Presse</a>
            <a href="#" onclick="openModal('Contactez-nous')" class="hover:text-black transition-colors">Contact</a>
        </div>
        
        <p class="text-[7px] text-neutral-300 tracking-[0.2em] uppercase">BORDEAUX • DARWIN ECO-SYSTÈME • 2025 ALL RIGHTS RESERVED</p>
    </footer>

    <!-- Modal System -->
    <div id="booking-modal" class="fixed inset-0 z-[100] hidden items-center justify-center px-4">
        <div class="absolute inset-0 bg-black/40 backdrop-blur-md transition-opacity" onclick="closeModal()"></div>
        <div class="relative bg-white w-full max-w-xl rounded-[4rem] shadow-2xl overflow-hidden p-12 md:p-16 border border-black/5">
            <button onclick="closeModal()" class="absolute top-8 right-8 text-neutral-300 hover:text-black">✕</button>
            <div id="modal-content">
                <span class="text-[10px] font-bold tracking-[0.5em] uppercase text-[#2D5A27] mb-6 block">Demande d'information</span>
                <h3 id="modal-title" class="text-4xl font-serif italic mb-10 leading-tight">Commençons votre <br/>ascension.</h3>
                <form onsubmit="handleModalSubmit(event)" class="space-y-6">
                    <input id="modal-service-name" type="hidden" value="Contact Général">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input required type="text" placeholder="Prénom Nom" class="w-full bg-[#F7F5F2] border border-black/5 rounded-2xl px-6 py-4 focus:outline-none focus:border-[#2D5A27] transition-all text-sm">
                        <input required type="email" placeholder="Email professionnel" class="w-full bg-[#F7F5F2] border border-black/5 rounded-2xl px-6 py-4 focus:outline-none focus:border-[#2D5A27] transition-all text-sm">
                    </div>
                    <textarea placeholder="Comment pouvons-nous vous accompagner ?" class="w-full bg-[#F7F5F2] border border-black/5 rounded-2xl px-6 py-4 focus:outline-none focus:border-[#2D5A27] transition-all h-24 text-sm"></textarea>
                    <button id="modal-submit-btn" class="w-full bg-black text-white font-bold py-6 rounded-2xl uppercase text-[10px] tracking-[0.4em] hover:bg-[#2D5A27] transition-all shadow-xl">Valider la demande</button>
                </form>
            </div>
        </div>
    </div>

    <script type="module">
        import { GoogleGenAI } from "@google/genai";

        const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        async function fetchImage(prompt) {
            try {
                const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                const response = await ai.models.generateContent({
                    model: 'gemini-2.5-flash-image',
                    contents: { parts: [{ text: `Professional architectural brand photography for Peak & Beans: ${prompt}. Cinematic warm lighting, minimalist luxury, 8k resolution.` }] },
                    config: { imageConfig: { aspectRatio: "16:9" } },
                });
                for (const part of response.candidates[0].content.parts) {
                    if (part.inlineData) return `data:image/png;base64,${part.inlineData.data}`;
                }
            } catch (error) {
                console.error("Hero Image Error:", error);
                return null;
            }
        }

        async function fetchVideo(prompt, loadingMsgElementId) {
            const messages = [
                "Analyse des paramètres de performance...",
                "Optimisation du flux bio-cellulaire...",
                "Rendu des textures organiques...",
                "Finalisation de l'expérience cinématique...",
                "Traitement des couches de lumière..."
            ];
            
            let msgIndex = 0;
            const msgTimer = setInterval(() => {
                const el = document.getElementById(loadingMsgElementId);
                if (el) el.innerText = messages[msgIndex % messages.length];
                msgIndex++;
            }, 8000);

            try {
                const ai = new GoogleGenAI({ apiKey: process.env.API_KEY });
                let operation = await ai.models.generateVideos({
                    model: 'veo-3.1-fast-generate-preview',
                    prompt: `Cinematic high-end advertising video for Peak & Beans: ${prompt}. Smooth camera movement, elegant high resolution, Bordeaux style.`,
                    config: {
                        numberOfVideos: 1,
                        resolution: '720p',
                        aspectRatio: '16:9'
                    }
                });

                while (!operation.done) {
                    await delay(10000);
                    operation = await ai.operations.getVideosOperation({ operation: operation });
                }

                clearInterval(msgTimer);
                const downloadLink = operation.response?.generatedVideos?.[0]?.video?.uri;
                if (!downloadLink) return null;

                const response = await fetch(`${downloadLink}&key=${process.env.API_KEY}`);
                const blob = await response.blob();
                return URL.createObjectURL(blob);
            } catch (error) {
                clearInterval(msgTimer);
                console.error("Video Generation Error:", error);
                return null;
            }
        }

        async function initApp() {
            // 1. Hero Image
            const heroContainer = document.getElementById('hero-image');
            const heroUrl = await fetchImage("Interior of a high-end luxury biohacking café in Bordeaux Darwin, sleek specialty coffee bar, green and wood textures, morning sun, 8k resolution.");
            if (heroUrl) {
                heroContainer.innerHTML = `<img src="${heroUrl}" class="w-full h-full object-cover animate-in fade-in duration-1000" alt="Hero">`;
            }

            // 2. Video Generations
            const labVideoContainer = document.getElementById('lab-video-container');
            const labVideoUrl = await fetchVideo("High-tech recovery lab interior with glowing red light panels and a cryotherapy machine emitting cold mist, ultra clean design.", "lab-loading-msg");
            if (labVideoUrl) {
                labVideoContainer.innerHTML = `
                    <video src="${labVideoUrl}" class="w-full h-full object-cover" autoplay loop muted playsinline></video>
                    <div class="absolute inset-0 video-overlay"></div>
                `;
            }

            const barVideoContainer = document.getElementById('bar-video-container');
            const barVideoUrl = await fetchVideo("Macro shot of a high-end specialty coffee being prepared with white latte art in a premium ceramic cup, soft steam rising.", "bar-loading-msg");
            if (barVideoUrl) {
                barVideoContainer.innerHTML = `
                    <video src="${barVideoUrl}" class="w-full h-full object-cover" autoplay loop muted playsinline></video>
                    <div class="absolute inset-0 video-overlay"></div>
                `;
            }
        }

        window.openModal = (subject) => {
            document.getElementById('modal-title').innerText = subject;
            document.getElementById('modal-service-name').value = subject;
            document.getElementById('booking-modal').classList.replace('hidden', 'flex');
            document.body.style.overflow = 'hidden';
        };
        window.closeModal = () => {
            document.getElementById('booking-modal').classList.replace('flex', 'hidden');
            document.body.style.overflow = 'auto';
        };
        window.handleModalSubmit = (e) => {
            e.preventDefault();
            const service = document.getElementById('modal-service-name').value;
            const content = document.getElementById('modal-content');
            content.innerHTML = `<div class="text-center py-20"><p class="text-2xl font-serif italic mb-4">Demande confirmée.</p><p class="text-[10px] uppercase tracking-widest text-neutral-400">Votre accès pour "${service}" est en cours de traitement.</p><button onclick="closeModal()" class="mt-12 text-[10px] font-bold uppercase underline">Fermer</button></div>`;
        };

        document.addEventListener('DOMContentLoaded', initApp);
    </script>
</body>
</html>
